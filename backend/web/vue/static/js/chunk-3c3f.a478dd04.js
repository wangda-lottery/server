(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3c3f"],{"5G8V":function(e,t,s){},"6Nkr":function(e,t,s){"use strict";var i=s("5G8V");s.n(i).a},Fupb:function(e,t,s){"use strict";s.r(t);var i=s("P2sY"),a=s.n(i),n=s("14Xm"),r=s.n(n),l=s("D3Ub"),o=s.n(l),c=s("EwjG"),u=s("iXUw"),d={name:"PlatStaffRoles",filters:{},data:function(){return{listLoading:!0,listQuery:{page:1,perPage:10,sort:"-id",nickname:void 0},editDlgVisible:!1,editObject:{},loginLogVisible:!1}},computed:{users:function(){return this.$store.getters.users},userCount:function(){return this.$store.getters.users._meta.totalCount},platStaffRoleTagType:function(e){return this.$store.getters.platStaffRoleTagType(e)},platStaffRoleText:function(e){return this.$store.getters.platStaffRoleText(e)}},mounted:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getUserList();case 2:case"end":return t.stop()}},t,e)}))()},methods:{getUserList:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.prev=1,t.next=4,e.$store.dispatch(c.n.GetUserList,e.listQuery);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),e.$message.error(t.t0.message);case 9:e.listLoading=!1;case 10:case"end":return t.stop()}},t,e,[[1,6]])}))()},onCreateUser:function(){this.editObject={},this.editDlgVisible=!0},onEditUser:function(e){this.editObject=e,this.editDlgVisible=!0},onSaveAdmin:function(){var e=this;return o()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.listLoading=!0,t.prev=1,!e.editObject.id){t.next=7;break}return t.next=5,e.$store.dispatch(c.n.UpdatePlatAdmin,e.editObject);case 5:t.next=9;break;case 7:return t.next=9,e.$store.dispatch(c.n.CreatePlatAdmin,e.editObject);case 9:e.$message.success(e.editObject.id?"保存成功!":"创建成功!"),e.getUserList(),e.editDlgVisible=!1,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),e.$message.error(t.t0.message);case 17:e.listLoading=!1;case 18:case"end":return t.stop()}},t,e,[[1,14]])}))()},onSearch:function(){this.listQuery.page=1,this.getUserList()},onSizeChange:function(e){this.listQuery.limit=e,this.getUserList()},onPageChange:function(e){this.listQuery.page=e,this.getUserList()},onDisableAdmin:function(e,t){var s=this;return o()(r.a.mark(function i(){var n;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return s.listLoading=!0,i.prev=1,n={},a()(n,e),n.status=t,i.next=7,s.$store.dispatch(c.n.UpdateUserInfo,n);case 7:a()(e,n),s.$message.success("操作成功!"),i.next=14;break;case 11:i.prev=11,i.t0=i.catch(1),s.$message.error(i.t0.message);case 14:s.listLoading=!1;case 15:case"end":return i.stop()}},i,s,[[1,11]])}))()},staffRolesToHtml:function(e){var t=Object(u.staffRolesTag)(e);return console.log(t),t}}},p=(s("6Nkr"),s("KHd+")),f=Object(p.a)(d,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("div",[s("el-col",{staticClass:"toolbar",attrs:{span:24}},[s("el-form",{attrs:{inline:!0,model:e.listQuery}},[s("el-form-item",[s("el-input",{attrs:{placeholder:"昵称",clearable:""},model:{value:e.listQuery.nickname,callback:function(t){e.$set(e.listQuery,"nickname",t)},expression:"listQuery.nickname"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")]),e._v(" "),s("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:e.onCreateUser}},[e._v("管理员注册")])],1)],1)],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.users.items,border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{label:"ID",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"昵称",align:"center",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"start","align-items":"center"}},[s("img",{staticStyle:{"border-radius":"5px","margin-right":"5px"},attrs:{src:t.row.headimgUrl,alt:"",width:"30px",height:"30px"}}),e._v(" "),s("span",{staticClass:"link-type",on:{click:function(s){e.onEditUser(t.row)}}},[e._v(e._s(t.row.nickname))])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"登录名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",[s("span",[e._v(e._s(t.row.username))])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{domProps:{innerHTML:e._s(e.staffRolesToHtml(t.row.role))}})]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"状态",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tag",{attrs:{type:t.row.status?"success":"danger",size:"small"}},[e._v(e._s(t.row.status?"正常":"禁用"))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button-group",[1===t.row.status?s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(s){e.onDisableAdmin(t.row,0)}}},[e._v("禁用")]):s("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(s){e.onDisableAdmin(t.row,1)}}},[e._v("启用")])],1)]}}])})],1),e._v(" "),s("div",{staticClass:"pagination-container"},[s("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.users.length>0,expression:"users.length > 0"}],attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,total:e.userCount,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.onSizeChange,"current-change":e.onPageChange}})],1)],1),e._v(" "),s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{title:"员工信息",visible:e.editDlgVisible,width:"400px"},on:{"update:visible":function(t){e.editDlgVisible=t}}},[s("el-form",{attrs:{model:e.editObject,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"登录名"}},[s("el-input",{attrs:{readonly:!!e.editObject.id},model:{value:e.editObject.username,callback:function(t){e.$set(e.editObject,"username",t)},expression:"editObject.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户昵称"}},[s("el-input",{model:{value:e.editObject.nickname,callback:function(t){e.$set(e.editObject,"nickname",t)},expression:"editObject.nickname"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户头像"}},[s("el-input",{model:{value:e.editObject.headimgUrl,callback:function(t){e.$set(e.editObject,"headimgUrl",t)},expression:"editObject.headimgUrl"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"用户角色"}},[s("el-select",{staticStyle:{width:"100%"},model:{value:e.editObject.role,callback:function(t){e.$set(e.editObject,"role",t)},expression:"editObject.role"}},[s("el-option",{attrs:{label:"管理员",value:"su"}}),e._v(" "),s("el-option",{attrs:{label:"客服",value:"cs"}}),e._v(" "),s("el-option",{attrs:{label:"财务",value:"fi"}}),e._v(" "),s("el-option",{attrs:{label:"访客",value:"gu"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"新的密码"}},[s("el-input",{attrs:{type:"password"},model:{value:e.editObject.password,callback:function(t){e.$set(e.editObject,"password",t)},expression:"editObject.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码"}},[s("el-input",{attrs:{type:"password"},model:{value:e.editObject.confirmPassword,callback:function(t){e.$set(e.editObject,"confirmPassword",t)},expression:"editObject.confirmPassword"}})],1),e._v(" "),e.editObject.id?s("el-form-item",{attrs:{label:"注册时间"}},[s("el-input",{attrs:{readonly:""},model:{value:e.editObject.createTime,callback:function(t){e.$set(e.editObject,"createTime",t)},expression:"editObject.createTime"}})],1):e._e(),e._v(" "),s("el-form-item",{attrs:{label:"只读权限"}},[s("el-switch",{attrs:{value:!!e.editObject.readonly},on:{change:function(t){return e.editObject.readonly=t?1:0}}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.editDlgVisible=!1}}},[e._v(" 关 闭")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.onSaveAdmin}},[e._v("保 存")])],1)],1)],1)},[],!1,null,null,null);f.options.__file="accounts.vue";t.default=f.exports}}]);